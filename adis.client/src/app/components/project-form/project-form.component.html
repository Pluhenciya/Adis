<div class="project-form-container">
  <h2 mat-dialog-title class="dialog-title">
    <mat-icon>üìã</mat-icon>
    {{ data?.project ? '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞' : '–ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç' }}
  </h2>

  <mat-dialog-content>
    <form [formGroup]="projectForm" (ngSubmit)="onSubmit()">
      <!-- –°–µ–∫—Ü–∏—è –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ -->
      <div class="section">
        <h3><mat-icon>engineering</mat-icon> –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h3>
        <mat-form-field appearance="outline">
          <mat-label>–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞</mat-label>
          <mat-select formControlName="status">
            <mat-option *ngFor="let status of projectStatuses" [value]="status">
              {{ getStatusLabel(status) }}
            </mat-option>
          </mat-select>
          <mat-hint>–¢–µ–∫—É—â–∏–π —ç—Ç–∞–ø —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏</mat-hint>
          <mat-error *ngIf="status?.hasError('required')">–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ</mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –ª–∏—Ü–æ</mat-label>
          <input matInput formControlName="responsiblePerson">
          <mat-icon matSuffix>person</mat-icon>
          <mat-error *ngIf="responsiblePerson?.hasError('required')">–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ</mat-error>
        </mat-form-field>
      </div>

      <!-- –°–µ–∫—Ü–∏—è –û–±—ä–µ–∫—Ç —Ä–∞–±–æ—Ç -->
      <div class="section">
        <h3>–û–±—ä–µ–∫—Ç —Ä–∞–±–æ—Ç</h3>
        <mat-form-field appearance="outline">
          <mat-label>–ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ —Ä–∞–±–æ—Ç</mat-label>
          <input matInput formControlName="nameWorkObject">
          <mat-error *ngIf="nameWorkObject?.hasError('required')">–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ</mat-error>
        </mat-form-field>

        <div class="geometry-type-selector">
          <button mat-stroked-button type="button" (click)="startDrawing('Point')" [disabled]="isDrawing">
            –¢–æ—á–∫–∞
          </button>
          <button mat-stroked-button type="button" (click)="startDrawing('LineString')" [disabled]="isDrawing">
            –õ–∏–Ω–∏—è
          </button>
          <button mat-stroked-button type="button" (click)="startDrawing('Polygon')" [disabled]="isDrawing">
            –ü–æ–ª–∏–≥–æ–Ω
          </button>
        </div>

        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–∞—Ä—Ç—ã -->
        <div class="map-container" #mapContainer></div>
      </div>

      <!-- –°–µ–∫—Ü–∏—è –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ -->
      <div class="section">
        <h3>–ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ</h3>
        <mat-form-field appearance="outline">
          <mat-label>–ü–æ–¥—Ä—è–¥—á–∏–∫</mat-label>
          <input matInput formControlName="contractor">
          <mat-error *ngIf="contractor?.hasError('required')">–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ</mat-error>
        </mat-form-field>

        <div class="date-fields">
          <mat-form-field appearance="outline">
            <mat-label>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</mat-label>
            <input matInput [matDatepicker]="startPicker" formControlName="startDate">
            <mat-datepicker-toggle matSuffix [for]="startPicker"></mat-datepicker-toggle>
            <mat-datepicker #startPicker></mat-datepicker>
            <mat-error *ngIf="startDate?.hasError('required')">–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ</mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è</mat-label>
            <input matInput [matDatepicker]="endPicker" formControlName="endDate">
            <mat-datepicker-toggle matSuffix [for]="endPicker"></mat-datepicker-toggle>
            <mat-datepicker #endPicker></mat-datepicker>
            <mat-error *ngIf="endDate?.hasError('required')">–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ</mat-error>
          </mat-form-field>
        </div>
      </div>
    </form>
  </mat-dialog-content>

  <!-- –î–µ–π—Å—Ç–≤–∏—è –¥–∏–∞–ª–æ–≥–∞ -->
  <mat-dialog-actions align="end">
    <button mat-button mat-dialog-close>–û—Ç–º–µ–Ω–∞</button>
    <button mat-raised-button color="primary" [disabled]="isSubmitting || projectForm.invalid" (click)="onSubmit()">
      {{ isSubmitting ? '–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...' : '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å' }}
    </button>
  </mat-dialog-actions>
</div>